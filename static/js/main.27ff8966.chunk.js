(this["webpackJsonpreact-family-tree-example"]=this["webpackJsonpreact-family-tree-example"]||[]).push([[0],{120:function(e,a,t){e.exports=t(249)},121:function(e,a,t){},13:function(e,a,t){e.exports={root:"FamilyNode_root__1MX6K",inner:"FamilyNode_inner__3gImM",match:"FamilyNode_match__1WwEW",image:"FamilyNode_image__19yH7",anonymous:"FamilyNode_anonymous__3m582",name:"FamilyNode_name__kMFgk",from:"FamilyNode_from__2AMA7",date:"FamilyNode_date__1wauX",age:"FamilyNode_age__3hCed",male:"FamilyNode_male__2W4NO",female:"FamilyNode_female__3NgRT",isRoot:"FamilyNode_isRoot__3viB_",birthday:"FamilyNode_birthday__100A7",blink:"FamilyNode_blink__1s_Te"}},130:function(e,a){},132:function(e,a){},143:function(e,a){},145:function(e,a){},172:function(e,a){},174:function(e,a){},175:function(e,a){},181:function(e,a){},183:function(e,a){},201:function(e,a){},204:function(e,a){},220:function(e,a){},223:function(e,a){},249:function(e,a,t){"use strict";t.r(a);t(121);var n=t(0),r=t.n(n),o=t(116),c=t.n(o),i=t(20),l=t(10),m=t.n(l),s=t(64),d=t.n(s),p=t(118),u=t(37),h=t.n(u),_=t(119),f=t(45),g=t.n(f),y=r.a.memo((function(e){let{min:a,max:t,captureWheel:o,className:c,style:i,children:l}=e;const m=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const e=m.current;if(e)return Object(_.a)({element:e,minZoom:a,maxZoom:t,captureWheel:o})},[a,t,o]),r.a.createElement("div",{ref:m,className:h()(c,g.a.root),style:i},r.a.createElement("div",{className:g.a.point},r.a.createElement("div",{className:g.a.canvas},l)))})),b=t(13),E=t.n(b),N=t(253),v=t(251),j=t(252),w=t(254),A=r.a.memo((function(e){let{node:a,isRoot:t,search:n,highlightBirthday:o,onClick:c,onSubClick:i,style:l}=e;const s=m.a.compact([a.birthday,a.deathday]).join(" - "),d=(a.image||"").match(/https:\/\/drive.google.com\/file\/d\/(.*)\/view/),p=d&&d[1],u=!!n&&new RegExp(m.a.escapeRegExp(n),"i").test(a.name),_=Object(N.a)(a.birthday,"d/M/yyyy",new Date),f=Object(v.a)(_,Object(j.a)(new Date)),g=Object(w.a)(f,new Date),y=o&&g>=0&&g<15&&!a.deathday;return r.a.createElement("div",{className:h()(E.a.root,y&&E.a.birthday,u&&E.a.match),style:l,onClick:()=>{c(a.id)}},r.a.createElement("div",{className:h()(E.a.inner,E.a[a.gender],t&&E.a.isRoot)},p&&r.a.createElement("img",{className:E.a.image,src:"https://drive.google.com/thumbnail?id=".concat(p),alt:a.name,title:a.name}),!p&&r.a.createElement("div",{className:E.a.anonymous},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"}))),r.a.createElement("p",{className:E.a.name},a.name||"-"),r.a.createElement("p",{className:E.a.from},a.from||"-"),r.a.createElement("p",{className:E.a.date},s,a.age&&a.deathday&&r.a.createElement("span",{className:E.a.age},"(",a.age,")"))))})),k=t(117),x=t.n(k);const C=(e,a)=>({id:e.id,type:a}),O=(e,a)=>{const t=((e,a)=>"Home"===a.gender?"male":"Dona"===a.gender?"female":"male")(0,a),n=((e,a)=>m.a.map(m.a.filter(e,e=>a.father===e.name||a.mother===e.name),e=>C(e,"blood")))(e,a),r=((e,a)=>m.a.map(m.a.filter(e,e=>a.father===e.father&&a.mother===e.mother&&a.name!==e.name),e=>C(e,"blood")))(e,a),o=((e,a)=>{const t=m.a.filter(e,e=>e.name===a.spouse);return m.a.map(t,e=>C(e,"married"))})(e,a),c=((e,a)=>m.a.map(m.a.filter(e,e=>a.name===e.father||a.name===e.mother),e=>C(e,"blood")))(e,a);return{id:a.id,name:a.name,from:a.from,birthday:a.birthday,deathday:a.deathday,age:a.age,image:a.image,gender:t,parents:n,siblings:r,spouses:o,children:c}};var F=async e=>{const{data:a}=x.a.parse(e,{header:!0}),t=m.a.compact(a.map(e=>{const a=e.Nom,t=e["Lloc de naixament"],n=e["Data de naixament"],r=e["Data de defunci\xf3"],o=e["G\xe8nere"],c=e.Pare,i=e.Mare,l=e["C\xf2njuge"],m=e.Foto,s=e.Edat;return a?{id:a,name:a,father:c,mother:i,spouse:l,from:t,birthday:n,deathday:r,image:m,gender:o,age:s}:null}));return t.map(e=>O(t,e))},S=t(9),R=t.n(S);var B=r.a.memo((function(){const[e,a]=Object(n.useState)(""),[t,o]=Object(n.useState)(!1),[c,l]=Object(n.useState)(!0),[s,u]=Object(n.useState)([]),[h,_]=r.a.useState(!0),[f,g]=Object(n.useState)(""),[b,E]=Object(n.useState)(""),[N,v]=Object(n.useState)(""),j=Object(n.useCallback)(()=>v(b),[b]),w=async()=>{const a=((e,a)=>{try{const t=d.a.AES.decrypt(e,a);return t.toString(d.a.enc.Utf8)}catch(t){return""}})("U2FsdGVkX19y1HrmBM266ECLkq9iWyGhsaicssPfVQcXIdhtLasZroSugpJf0yR64bN7AlL9t0aUKaTT2yqw+ZBaAz7LGWDjae1wM1FLmLXUUSuQEwYsGiL2cCj/e6GwtkgQ7oupjqc6PHeNfvcoKvUuXzeSDyV7s1TUiRqctQocVEfB4imdGxgW85eQUonA94EEqAiuj2enBhw/d8Qq/UDI/4HQeoENIa8NUfezBQFvn+d+XjiHt2dNwL0wKR/S",e);if(a.match(/https/)){const e=await fetch(a);if(e.ok){const a=await e.text(),t=await F(a),n=t.map((e,a)=>m.a.pickBy(Object(i.a)(Object(i.a)({},e),{},{from:null,birthday:null,deathday:null,image:null}),m.a.identity));console.log(t),console.log(n),u(t),v(t[0].id),E(t[0].id)}else o(!0)}else o(!0);l(!1)};Object(n.useEffect)(()=>{a(prompt("Clau d'acc\xe9s")||"")},[]),Object(n.useEffect)(()=>{e&&w()},[e]);return e?r.a.createElement("div",{className:R.a.root},r.a.createElement("header",{className:R.a.header},r.a.createElement("h1",{className:R.a.title},r.a.createElement("span",{className:R.a.emoji,role:"img","aria-label":"Arbre"},"\ud83c\udf33"),"Arbre Geneal\xf2gic"),r.a.createElement("div",{className:R.a.searcher},r.a.createElement("span",{className:R.a.emoji,role:"img","aria-label":"Cercar"},"\ud83d\udd0d"),"Cercar: ",r.a.createElement("input",{type:"text",value:f,onChange:e=>{g(e&&e.target.value)}})),r.a.createElement("div",{className:R.a.searcher},r.a.createElement("span",{className:R.a.emoji,role:"img","aria-label":"Aniversaris"},"\ud83c\udf82"),"Destacar pr\xf2xims aniversaris: ",r.a.createElement("input",{type:"checkbox",defaultChecked:h,onChange:e=>{_(e&&e.target.checked)}})),r.a.createElement("div",{className:R.a.searcher},r.a.createElement("button",{onClick:()=>{l(!0),w()}},r.a.createElement("span",{className:R.a.emoji,role:"img","aria-label":"Recarregar"},"\ud83d\udd01"),"Carregar de nou les dades")),r.a.createElement("span",{className:R.a.description},"Arbre Geneal\xf2gic amb tots els avantpassats coneguts de la nostra familia")),t&&r.a.createElement("div",{className:R.a.error},"Error carregant les dades!"),!t&&c&&r.a.createElement("div",{className:R.a.loading},"Carregant..."),!c&&s&&N&&r.a.createElement(y,{min:.5,max:2.5,captureWheel:!0,className:R.a.wrapper},r.a.createElement(p.a,{nodes:s,rootId:N,width:190,height:220,className:R.a.tree,renderNode:e=>r.a.createElement(A,{key:e.id,node:e,isRoot:e.id===N,search:f,highlightBirthday:h,onSubClick:v,onClick:v,style:{width:190,height:220,transform:"translate(".concat(95*e.left,"px, ").concat(110*e.top,"px)")}})})),N!==b&&r.a.createElement("div",{className:R.a.reset,onClick:j},"Reset")):null}));c.a.render(r.a.createElement(B,null),document.getElementById("root"))},45:function(e,a,t){e.exports={root:"PinchZoomPan_root__9P_Qv",point:"PinchZoomPan_point__2y-JG",canvas:"PinchZoomPan_canvas__EVab0"}},9:function(e,a,t){e.exports={root:"App_root__1Jh3p",header:"App_header__2MS2l",title:"App_title__1YcTA",wrapper:"App_wrapper__3ox-V",emoji:"App_emoji__1WAbk",tree:"App_tree__1-Ar8",reset:"App_reset__2p6Ak",description:"App_description__h9e0b",loading:"App_loading__Poh4x",error:"App_error__AnA0Y"}}},[[120,1,2]]]);
//# sourceMappingURL=main.27ff8966.chunk.js.map