(this["webpackJsonpreact-family-tree-example"]=this["webpackJsonpreact-family-tree-example"]||[]).push([[0],{120:function(e,a,t){e.exports=t(249)},121:function(e,a,t){},13:function(e,a,t){e.exports={root:"FamilyNode_root__1MX6K",inner:"FamilyNode_inner__3gImM",match:"FamilyNode_match__1WwEW",image:"FamilyNode_image__19yH7",anonymous:"FamilyNode_anonymous__3m582",name:"FamilyNode_name__kMFgk",from:"FamilyNode_from__2AMA7",date:"FamilyNode_date__1wauX",age:"FamilyNode_age__3hCed",male:"FamilyNode_male__2W4NO",female:"FamilyNode_female__3NgRT",isRoot:"FamilyNode_isRoot__3viB_",birthday:"FamilyNode_birthday__100A7",blink:"FamilyNode_blink__1s_Te"}},130:function(e,a){},132:function(e,a){},143:function(e,a){},145:function(e,a){},172:function(e,a){},174:function(e,a){},175:function(e,a){},181:function(e,a){},183:function(e,a){},201:function(e,a){},204:function(e,a){},220:function(e,a){},223:function(e,a){},249:function(e,a,t){"use strict";t.r(a);t(121);var n=t(0),r=t.n(n),o=t(116),c=t.n(o),m=t(118),i=t(37),l=t.n(i),s=t(119),d=t(45),p=t.n(d),h=r.a.memo((function(e){let{min:a,max:t,captureWheel:o,className:c,style:m,children:i}=e;const d=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const e=d.current;if(e)return Object(s.a)({element:e,minZoom:a,maxZoom:t,captureWheel:o})},[a,t,o]),r.a.createElement("div",{ref:d,className:l()(c,p.a.root),style:m},r.a.createElement("div",{className:p.a.point},r.a.createElement("div",{className:p.a.canvas},i)))})),u=t(10),_=t.n(u),f=t(13),g=t.n(f),y=t(253),b=t(251),N=t(252),E=t(254),v=r.a.memo((function(e){let{node:a,isRoot:t,search:n,highlightBirthday:o,onClick:c,onSubClick:m,style:i}=e;const s=_.a.compact([a.birthday,a.deathday]).join(" - "),d=(a.image||"").match(/https:\/\/drive.google.com\/file\/d\/(.*)\/view/),p=d&&d[1],h=!!n&&new RegExp(_.a.escapeRegExp(n),"i").test(a.name),u=Object(y.a)(a.birthday,"d/M/yyyy",new Date),f=Object(b.a)(u,Object(N.a)(new Date)),v=Object(E.a)(f,new Date),w=o&&v>=0&&v<15&&!a.deathday;return r.a.createElement("div",{className:l()(g.a.root,w&&g.a.birthday,h&&g.a.match),style:i,onClick:()=>{c(a.id)}},r.a.createElement("div",{className:l()(g.a.inner,g.a[a.gender],t&&g.a.isRoot)},p&&r.a.createElement("img",{className:g.a.image,src:"https://drive.google.com/thumbnail?id=".concat(p),alt:a.name,title:a.name}),!p&&r.a.createElement("div",{className:g.a.anonymous},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"}))),r.a.createElement("p",{className:g.a.name},a.name||"-"),r.a.createElement("p",{className:g.a.from},a.from||"-"),r.a.createElement("p",{className:g.a.date},s,a.age&&a.deathday&&r.a.createElement("span",{className:g.a.age},"(",a.age,")"))))})),w=(t(20),t(46)),j=t.n(w),A=t(117),x=t.n(A);const k=(e,a)=>({id:e.id,type:a}),O=(e,a)=>{const t=((e,a)=>"Home"===a.gender?"male":"Dona"===a.gender?"female":"male")(0,a),n=((e,a)=>_.a.map(_.a.filter(e,e=>a.father===e.name||a.mother===e.name),e=>k(e,"blood")))(e,a),r=((e,a)=>_.a.map(_.a.filter(e,e=>a.father===e.father&&a.mother===e.mother&&a.name!==e.name),e=>k(e,"blood")))(e,a),o=((e,a)=>{const t=_.a.filter(e,e=>e.name===a.spouse);return _.a.map(t,e=>k(e,"married"))})(e,a),c=((e,a)=>_.a.map(_.a.filter(e,e=>a.name===e.father||a.name===e.mother),e=>k(e,"blood")))(e,a);return{id:a.id,name:a.name,from:a.from,birthday:a.birthday,deathday:a.deathday,age:a.age,image:a.image,gender:t,parents:n,siblings:r,spouses:o,children:c}};var C=t(9),S=t.n(C);var F=r.a.memo((function(){const[e,a]=Object(n.useState)(window.localStorage.getItem("passphrase")||""),[t,o]=Object(n.useState)(!1),[c,i]=Object(n.useState)(!0),[l,s]=Object(n.useState)([]),[d,p]=r.a.useState(!0),[u,f]=Object(n.useState)(""),[g,y]=Object(n.useState)(""),[b,N]=Object(n.useState)(""),E=Object(n.useCallback)(()=>N(g),[g]),w=async()=>{const t=((e,a)=>{try{const t=j.a.AES.decrypt(e,a);return t.toString(j.a.enc.Utf8)}catch(t){return""}})("U2FsdGVkX186bIgFZtZlz05ejtdGVBx5NqCEaBf8euwiqUXeN5+tiZuQYOdlemNKBhLOItq42c2wOMWiiVgk8Ui9TGBOZ7NSYSKI0FSD/wxN4pmLk/WqwG9DzaYmDPavag3vPsUU3jYnvplxp8Ya4BKN5kzcIo7GIudPhLjshVeOXoftWuKj3mbtKwI7ORf9GlD72qC8mVA0aHy1fZrcGTeGBAV3UuzThH626WUaUDDWynZ94GlVfVdb9IlCvPA9",e);if(t.match(/https/)){const n=await fetch(t);if(n.ok){window.localStorage.setItem("passphrase",e);const a=await n.text(),t=await(async e=>{const{data:a}=x.a.parse(e,{header:!0}),t=_.a.compact(a.map(e=>{const a=e.Nom,t=e["Lloc de naixament"],n=e["Data de naixament"],r=e["Data de defunci\xf3"],o=e["G\xe8nere"],c=e.Pare,m=e.Mare,i=e["C\xf2njuge"],l=e.Foto,s=e.Edat;return a?{id:a,name:a,father:c,mother:m,spouse:i,from:t,birthday:n,deathday:r,image:l,gender:o,age:s}:null}));return t.map(e=>O(t,e))})(a);s(t),N(t[0].id),y(t[0].id)}else a(""),window.localStorage.removeItem("passphrase"),o(!0)}else a(""),window.localStorage.removeItem("passphrase"),o(!0);i(!1)};Object(n.useEffect)(()=>{e||a(prompt("Clau d'acc\xe9s:")||"")},[]),Object(n.useEffect)(()=>{e&&w()},[e]);return e?r.a.createElement("div",{className:S.a.root},r.a.createElement("header",{className:S.a.header},r.a.createElement("h1",{className:S.a.title},r.a.createElement("span",{className:S.a.emoji,role:"img","aria-label":"Arbre"},"\ud83c\udf33"),"Arbre Geneal\xf2gic"),r.a.createElement("div",{className:S.a.searcher},r.a.createElement("span",{className:S.a.emoji,role:"img","aria-label":"Cercar"},"\ud83d\udd0d"),"Cercar: ",r.a.createElement("input",{type:"text",value:u,onChange:e=>{f(e&&e.target.value)}})),r.a.createElement("div",{className:S.a.searcher},r.a.createElement("span",{className:S.a.emoji,role:"img","aria-label":"Aniversaris"},"\ud83c\udf82"),"Destacar pr\xf2xims aniversaris: ",r.a.createElement("input",{type:"checkbox",defaultChecked:d,onChange:e=>{p(e&&e.target.checked)}})),r.a.createElement("div",{className:S.a.searcher},r.a.createElement("button",{onClick:()=>{i(!0),w()}},r.a.createElement("span",{className:S.a.emoji,role:"img","aria-label":"Recarregar"},"\ud83d\udd01"),"Carregar de nou les dades")),r.a.createElement("span",{className:S.a.description},"Arbre Geneal\xf2gic amb tots els avantpassats coneguts de la nostra familia")),t&&r.a.createElement("div",{className:S.a.error},"Error carregant les dades!"),!t&&c&&r.a.createElement("div",{className:S.a.loading},"Carregant..."),!c&&l&&b&&r.a.createElement(h,{min:.5,max:2.5,captureWheel:!0,className:S.a.wrapper},r.a.createElement(m.a,{nodes:l,rootId:b,width:190,height:220,className:S.a.tree,renderNode:e=>r.a.createElement(v,{key:e.id,node:e,isRoot:e.id===b,search:u,highlightBirthday:d,onSubClick:N,onClick:N,style:{width:190,height:220,transform:"translate(".concat(95*e.left,"px, ").concat(110*e.top,"px)")}})})),b!==g&&r.a.createElement("div",{className:S.a.reset,onClick:E},"Reset")):null}));c.a.render(r.a.createElement(F,null),document.getElementById("root"))},45:function(e,a,t){e.exports={root:"PinchZoomPan_root__9P_Qv",point:"PinchZoomPan_point__2y-JG",canvas:"PinchZoomPan_canvas__EVab0"}},9:function(e,a,t){e.exports={root:"App_root__1Jh3p",header:"App_header__2MS2l",title:"App_title__1YcTA",wrapper:"App_wrapper__3ox-V",emoji:"App_emoji__1WAbk",tree:"App_tree__1-Ar8",reset:"App_reset__2p6Ak",description:"App_description__h9e0b",loading:"App_loading__Poh4x",error:"App_error__AnA0Y"}}},[[120,1,2]]]);
//# sourceMappingURL=main.6a14e2a1.chunk.js.map