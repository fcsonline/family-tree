(this["webpackJsonpreact-family-tree-example"]=this["webpackJsonpreact-family-tree-example"]||[]).push([[0],{119:function(e,a,t){e.exports=t(248)},120:function(e,a,t){},129:function(e,a){},13:function(e,a,t){e.exports={root:"FamilyNode_root__1MX6K",inner:"FamilyNode_inner__3gImM",match:"FamilyNode_match__1WwEW",image:"FamilyNode_image__19yH7",anonymous:"FamilyNode_anonymous__3m582",name:"FamilyNode_name__kMFgk",from:"FamilyNode_from__2AMA7",date:"FamilyNode_date__1wauX",age:"FamilyNode_age__3hCed",male:"FamilyNode_male__2W4NO",female:"FamilyNode_female__3NgRT",isRoot:"FamilyNode_isRoot__3viB_",birthday:"FamilyNode_birthday__100A7",blink:"FamilyNode_blink__1s_Te"}},131:function(e,a){},142:function(e,a){},144:function(e,a){},171:function(e,a){},173:function(e,a){},174:function(e,a){},180:function(e,a){},182:function(e,a){},200:function(e,a){},203:function(e,a){},219:function(e,a){},222:function(e,a){},248:function(e,a,t){"use strict";t.r(a);t(120);var n=t(0),r=t.n(n),o=t(115),c=t.n(o),i=t(63),m=t.n(i),s=t(117),l=t(36),d=t.n(l),p=t(118),h=t(44),u=t.n(h),_=r.a.memo((function(e){let{min:a,max:t,captureWheel:o,className:c,style:i,children:m}=e;const s=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const e=s.current;if(e)return Object(p.a)({element:e,minZoom:a,maxZoom:t,captureWheel:o})},[a,t,o]),r.a.createElement("div",{ref:s,className:d()(c,u.a.root),style:i},r.a.createElement("div",{className:u.a.point},r.a.createElement("div",{className:u.a.canvas},m)))})),f=t(12),g=t.n(f),y=t(13),b=t.n(y),E=t(252),N=t(250),v=t(251),w=t(253),j=r.a.memo((function(e){let{node:a,isRoot:t,search:n,highlightBirthday:o,onClick:c,onSubClick:i,style:m}=e;const s=g.a.compact([a.birthday,a.deathday]).join(" - "),l=(a.image||"").match(/https:\/\/drive.google.com\/file\/d\/(.*)\/view/),p=l&&l[1],h=!!n&&new RegExp(g.a.escapeRegExp(n),"i").test(a.name),u=Object(E.a)(a.birthday,"d/M/yyyy",new Date),_=Object(N.a)(u,Object(v.a)(new Date)),f=Object(w.a)(_,new Date),y=o&&f>=0&&f<15&&!a.deathday;return r.a.createElement("div",{className:d()(b.a.root,y&&b.a.birthday,h&&b.a.match),style:m,onClick:()=>{c(a.id)}},r.a.createElement("div",{className:d()(b.a.inner,b.a[a.gender],t&&b.a.isRoot)},p&&r.a.createElement("img",{className:b.a.image,src:"https://drive.google.com/thumbnail?id=".concat(p),alt:a.name,title:a.name}),!p&&r.a.createElement("div",{className:b.a.anonymous},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"}))),r.a.createElement("p",{className:b.a.name},a.name||"-"),r.a.createElement("p",{className:b.a.from},a.from||"-"),r.a.createElement("p",{className:b.a.date},s,a.age&&a.deathday&&r.a.createElement("span",{className:b.a.age},"(",a.age,")"))))})),A=t(116),k=t.n(A);const x=(e,a)=>({id:e.id,type:a}),C=(e,a)=>{const t=((e,a)=>"Home"===a.gender?"male":"Dona"===a.gender?"female":"male")(0,a),n=((e,a)=>g.a.map(g.a.filter(e,e=>a.father===e.name||a.mother===e.name),e=>x(e,"blood")))(e,a),r=((e,a)=>g.a.map(g.a.filter(e,e=>a.father===e.father&&a.mother===e.mother&&a.name!==e.name),e=>x(e,"blood")))(e,a),o=((e,a)=>{const t=g.a.filter(e,e=>e.name===a.spouse);return g.a.map(t,e=>x(e,"married"))})(e,a),c=((e,a)=>g.a.map(g.a.filter(e,e=>a.name===e.father||a.name===e.mother),e=>x(e,"blood")))(e,a);return{id:a.id,name:a.name,from:a.from,birthday:a.birthday,deathday:a.deathday,age:a.age,image:a.image,gender:t,parents:n,siblings:r,spouses:o,children:c}};var S=async e=>{const{data:a}=k.a.parse(e,{header:!0}),t=g.a.compact(a.map(e=>{const a=e.Nom,t=e["Lloc de naixament"],n=e["Data de naixament"],r=e["Data de defunci\xf3"],o=e["G\xe8nere"],c=e.Pare,i=e.Mare,m=e["C\xf2njuge"],s=e.Foto,l=e.Edat;return a?{id:a,name:a,father:c,mother:i,spouse:m,from:t,birthday:n,deathday:r,image:s,gender:o,age:l}:null}));return t.map(e=>C(t,e))},F=t(9),O=t.n(F);var R=r.a.memo((function(){const[e,a]=Object(n.useState)(window.localStorage.getItem("passphrase")||""),[t,o]=Object(n.useState)(!1),[c,i]=Object(n.useState)(!0),[l,d]=Object(n.useState)([]),[p,h]=r.a.useState(!0),[u,f]=Object(n.useState)(""),[g,y]=Object(n.useState)(""),[b,E]=Object(n.useState)(""),N=Object(n.useCallback)(()=>E(g),[g]),v=async()=>{const t=((e,a)=>{try{const t=m.a.AES.decrypt(e,a);return t.toString(m.a.enc.Utf8)}catch(t){return""}})("U2FsdGVkX19y1HrmBM266ECLkq9iWyGhsaicssPfVQcXIdhtLasZroSugpJf0yR64bN7AlL9t0aUKaTT2yqw+ZBaAz7LGWDjae1wM1FLmLXUUSuQEwYsGiL2cCj/e6GwtkgQ7oupjqc6PHeNfvcoKvUuXzeSDyV7s1TUiRqctQocVEfB4imdGxgW85eQUonA94EEqAiuj2enBhw/d8Qq/UDI/4HQeoENIa8NUfezBQFvn+d+XjiHt2dNwL0wKR/S",e);if(t.match(/https/)){const n=await fetch(t);if(n.ok){window.localStorage.setItem("passphrase",e);const a=await n.text(),t=await S(a);d(t),E(t[0].id),y(t[0].id)}else a(""),window.localStorage.removeItem("passphrase"),o(!0)}else a(""),window.localStorage.removeItem("passphrase"),o(!0);i(!1)};Object(n.useEffect)(()=>{e||a(prompt("Clau d'acc\xe9s:")||"")},[]),Object(n.useEffect)(()=>{e&&v()},[e]);return e?r.a.createElement("div",{className:O.a.root},r.a.createElement("header",{className:O.a.header},r.a.createElement("h1",{className:O.a.title},r.a.createElement("span",{className:O.a.emoji,role:"img","aria-label":"Arbre"},"\ud83c\udf33"),"Arbre Geneal\xf2gic"),r.a.createElement("div",{className:O.a.searcher},r.a.createElement("span",{className:O.a.emoji,role:"img","aria-label":"Cercar"},"\ud83d\udd0d"),"Cercar: ",r.a.createElement("input",{type:"text",value:u,onChange:e=>{f(e&&e.target.value)}})),r.a.createElement("div",{className:O.a.searcher},r.a.createElement("span",{className:O.a.emoji,role:"img","aria-label":"Aniversaris"},"\ud83c\udf82"),"Destacar pr\xf2xims aniversaris: ",r.a.createElement("input",{type:"checkbox",defaultChecked:p,onChange:e=>{h(e&&e.target.checked)}})),r.a.createElement("div",{className:O.a.searcher},r.a.createElement("button",{onClick:()=>{i(!0),v()}},r.a.createElement("span",{className:O.a.emoji,role:"img","aria-label":"Recarregar"},"\ud83d\udd01"),"Carregar de nou les dades")),r.a.createElement("span",{className:O.a.description},"Arbre Geneal\xf2gic amb tots els avantpassats coneguts de la nostra familia")),t&&r.a.createElement("div",{className:O.a.error},"Error carregant les dades!"),!t&&c&&r.a.createElement("div",{className:O.a.loading},"Carregant..."),!c&&l&&b&&r.a.createElement(_,{min:.5,max:2.5,captureWheel:!0,className:O.a.wrapper},r.a.createElement(s.a,{nodes:l,rootId:b,width:190,height:220,className:O.a.tree,renderNode:e=>r.a.createElement(j,{key:e.id,node:e,isRoot:e.id===b,search:u,highlightBirthday:p,onSubClick:E,onClick:E,style:{width:190,height:220,transform:"translate(".concat(95*e.left,"px, ").concat(110*e.top,"px)")}})})),b!==g&&r.a.createElement("div",{className:O.a.reset,onClick:N},"Reset")):null}));c.a.render(r.a.createElement(R,null),document.getElementById("root"))},44:function(e,a,t){e.exports={root:"PinchZoomPan_root__9P_Qv",point:"PinchZoomPan_point__2y-JG",canvas:"PinchZoomPan_canvas__EVab0"}},9:function(e,a,t){e.exports={root:"App_root__1Jh3p",header:"App_header__2MS2l",title:"App_title__1YcTA",wrapper:"App_wrapper__3ox-V",emoji:"App_emoji__1WAbk",tree:"App_tree__1-Ar8",reset:"App_reset__2p6Ak",description:"App_description__h9e0b",loading:"App_loading__Poh4x",error:"App_error__AnA0Y"}}},[[119,1,2]]]);
//# sourceMappingURL=main.d7820821.chunk.js.map